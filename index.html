<html>
    <head>
        <link rel="stylesheet" href="./css/main.css" >
        <link rel="stylesheet" href="./css/template.css" >
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    </head>

    <body>
        <!-- <p>Lets Start Bakery</p> -->
        <div id="header">
            <p> POP-UP BAKERY <img src="https://png.pngtree.com/png-vector/20190214/ourlarge/pngtree-vector-cake-icon-png-image_515125.jpg"></p>
        </div>

        <div id="main">
            <div id="edit-selection-container"></div>
            <div id="view-container">
                <div id="popup-container" style="background-color:#7868e6;border-radius: 50%; width:300px;height:300px;text-align:center;justify-content: center;flex-direction: column;display : flex;box-shadow:inset 0px 0px 0px 10px #7868e6 ,inset 0px 0px 0px 12px white;">
                    <img id="logo" key="logo" src="https://img.icons8.com/clouds/2x/star.png" style="width:60px;height:60px;margin:0px auto" >
                    <p id="popup-heading" key="heading" draggable="true">Bakery</p>
                    <input id="popup-input" key="input" type="text" style="outline-width: 0;width: 200px;margin: 0px auto;height:40px;" draggable="true">
                    <button id="popup-submit" key="submit" style="border:none;width: 200px;margin: 0px auto;height:40px;" draggable="true">Subscribe Me</button>
                    <p id="popup-info" key="info"  draggable="true">Do Subscribe, to get latest updates</p>
                </div>
            </div>
            <div id="edit-form-container"></div>
            <div class="save-popup-container">
                <button id="save-btn" class ='btn' onclick="getHtml()"><b>SAVE</b></button>
            </div>
        </div>
        <script type="text/javascript" src="./js/index.js"></script>
        <script>
            $(document).ready(function(){
                $('input[type=text]').draggable({cancel:false,});
                $('input[type=color]').draggable({cancel:false,});
                $('button').draggable({cancel:false,});
                $('img').draggable({cancel:false,});

                $("p").draggable({});
                $("input").draggable({});
                $("button").draggable({});


                $('#save-btn').click(function(){
                    let html = getHtml();
                    let data = '{"popup_code": "ZwewsDr","popup_html":'+JSON.stringify(html)+'}';
                    $.ajax({
                        url: 'http://128.199.19.190:8001/api/store-html',
                        contentType: 'application/json',
                        dataType: 'json',
                        data: data,
                        type: 'POST',
                        success: function(data, textStatus, jqXHR){
                                alert(`COOL , POPUP IS SAVED , POPUP IMPORT HASH - ${data.id}`);
                            },
                        error: function(XMLHttpRequest, textStatus, errorThrown){
                                alert('false');
                            }
                    });
                })
            });
        </script>
    </body>
</html>